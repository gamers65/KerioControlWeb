@model List<string>
@{
    ViewData["Title"] = "Логи";
}

<div class="container-fluid py-7">
@*     <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0 fw-bold text-primary">
            <i class="fas fa-file-alt me-2"></i>Логи Kerio Control
        </h2>
     <a asp-action="Dashboard" class="btn btn-outline-primary btn-sm">
            <i class="fas fa-arrow-left me-2"></i>Назад
        </a>
    </div> *@

    <div class="card shadow-sm border-0">
@*         <div class="card-header bg-dark text-white py-3">
            <h5 class="mb-0">
                <i class="fas fa-terminal me-2"></i>Живой вывод логов
            </h5>
        </div> *@
        <div class="card-body p-0">
            <div id="logsContainer" class="logs-output">
                @foreach (var line in Model)
                {
                    <div class="log-line">@Html.Raw(line)</div>
                }
            </div>
        </div>
        <div class="card-footer bg-light text-muted small text-end">
            Всего строк: @Model.Count • Автопрокрутка вниз включена
        </div>
    </div>
</div>

<style>
    :root {
        --primary: #4361ee;
        --success: #06d6a0;
        --warning: #ff9f1c;
        --danger: #ef476f;
        --dark: #2a2a3b;
        --light: #f8f9fa;

        --gray-100: #f1f3f5;
        --gray-200: #e9ecef;
        --gray-600: #6c757d;
        --gray-800: #343a40;
    }

    /* ====== Обёртка ====== */
    .container-fluid {
        animation: fadeIn .4s ease;
    }

    @@keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }


    /* ====== Заголовок ====== */
    h2 {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary);
        display: flex;
        align-items: center;
    }

    /* ====== CARD (Glass Style, общий стиль панели) ====== */
    .card {
        border: none !important;
        border-radius: 1rem;
        background: rgba(255, 255, 255, 0.85) !important;
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        overflow: hidden;
        box-shadow: 0 15px 40px rgba(67, 97, 238, 0.18);
        transition: all .3s ease;
    }

    .card:hover {
        box-shadow: 0 25px 55px rgba(67, 97, 238, 0.28);
    }

    /* ====== CARD HEADER ====== */
    .card-header {
        background: linear-gradient(135deg, var(--primary), #3f37c9) !important;
        color: white !important;
        padding: 1.25rem 1.5rem;
        border-bottom: none;
    }

    .card-header h5 {
        font-weight: 600;
    }

    /* ====== CARD FOOTER ====== */
    .card-footer {
        background: var(--gray-100) !important;
        border-top: 1px solid var(--gray-200);
        padding: 0.9rem 1.2rem !important;
        font-size: .9rem;
        color: var(--gray-600);
    }

    /* ====== ЛОГИ (оставляем тёмную тему) ====== */
    .logs-output {
        max-height: 70vh;
        overflow-y: auto;
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 1rem;
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.93rem;
        line-height: 1.55;
    }

    .log-line {
        white-space: pre-wrap;
        border-bottom: 1px solid #2d2d2d;
        padding: 2px 0;
    }

    /* Подсветка типов логов */
    .log-line:contains("ERROR"),
    .log-line:contains("FATAL") {
        color: #ff6b6b !important;
    }

    .log-line:contains("WARN") {
        color: #ffa94d !important;
    }

    .log-line:contains("INFO") {
        color: #51cf66 !important;
    }

    .log-line:contains("DEBUG") {
        color: #4dabf7 !important;
    }

    /* ====== Красивый скролл ====== */
    .logs-output::-webkit-scrollbar {
        width: 10px;
    }

    .logs-output::-webkit-scrollbar-track {
        background: #2d2d2d;
        border-radius: 10px;
    }

    .logs-output::-webkit-scrollbar-thumb {
        background: #555;
        border-radius: 10px;
    }

    .logs-output::-webkit-scrollbar-thumb:hover {
        background: #777;
    }
</style>


@section Scripts {
    <script>
        const container = document.getElementById('logsContainer');
        container.scrollTop = container.scrollHeight;

        // Плавная подсветка новых строк (если будешь потом допиливать live-обновление)
        const observer = new MutationObserver(() => {
            container.scrollTop = container.scrollHeight;
        });
        observer.observe(container, { childList: true });
    </script>
}